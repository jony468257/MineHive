var config={attributes:true,childList:true,subtree:true};var timeoutId;var targets=[];var observer=new MutationObserver(function(mutations){const processedIds=new Set;const stages=new Set;var sumByGroup=new Map;var className="";mutations.forEach(function(mutation){var changedNode=mutation.target;const id=changedNode.id;className=changedNode.classList[0];if(!stages.has(className)){stages.add(className)}if(processedIds.has(id)){return}if(!changedNode.classList.contains("d-none")){var textContent=changedNode.textContent.trim();if(textContent!="-"){sumByGroup.set(className,(sumByGroup.get(className)??0)+parseFloat(textContent))}}processedIds.add(id)});updateValue(sumByGroup,stages)});function updateValue(sumByGroup,stages){sumByGroup.forEach(function(value,key){stages.delete(key);var text=parseInt(value)>0?parseInt(value):"-";$("#"+key).text(text)});for(let stage of stages){$("#"+stage).text("-")}}document.addEventListener("DOMContentLoaded",function(){initObserver()});function initObserver(){resetTimer();for(var i=0;i<targets.length;i++){var target=document.querySelectorAll("."+targets[i]);for(var j=0;j<target.length;j++){observer.observe(target[j],config)}}}function resetTimer(){clearTimeout(timeoutId);timeoutId=setTimeout(disconnectObserver,3e4)}function disconnectObserver(){observer.disconnect()}function approvePost(id){swal({title:"Are you sure?",text:"Do you want to approve this?",type:"warning",showCancelButton:true,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirm!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-danger ms-2",cancelButtonClass:"btn btn-success",buttonsStyling:false,reverseButtons:true}).then(result=>{if(result.value){event.preventDefault();document.getElementById("delete-form-"+id).submit()}})}function rejectPost(id){swal({title:"Are you sure?",text:"Please enter the reason for rejecting this",type:"warning",input:"text",showCancelButton:true,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirm!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-danger ms-2",cancelButtonClass:"btn btn-success",buttonsStyling:false,reverseButtons:true,inputValidator:value=>{if(!value){return"You need to enter a reason!"}}}).then(result=>{if(result.value){event.preventDefault();$(".rejection_status").val(result.value);document.getElementById("delete-cancel-"+id).submit()}else{return false}})}